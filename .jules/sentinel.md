## 2024-03-01 - HTML Injection (XSS) in Report Generation
**Vulnerability:** User-controlled content (SQL syntax differences, summary lines, file names) were injected directly into an HTML report template without escaping. This creates a Cross-Site Scripting (XSS) vulnerability if malicious SQL files containing `<script>` tags or other HTML payloads are compared and the resulting report is viewed in a browser.
**Learning:** Even internal tooling and desktop application outputs can introduce XSS if they generate web-viewable artifacts (HTML reports) from untrusted inputs. Python's `difflib.HtmlDiff` handles escaping within its diff table generation, but manual string interpolations outside of that (like headers, summaries, and descriptions) were unprotected. Additionally, using `html` as a local variable name shadows the standard library `html` module, preventing its use in generators and inner scopes.
**Prevention:** Always escape any dynamic content interpolated into HTML templates. Use `html.escape()` for text content and attribute values. Be mindful of variable shadowing of built-in modules when naming variables (e.g., use `html_content` instead of `html`).
